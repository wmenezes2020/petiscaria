"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(middleware)/./node_modules/next/dist/esm/server/web/exports/next-response.js\");\n\n// Definição de perfis e suas rotas permitidas\nconst roleRoutes = {\n    admin: [\n        \"/app/dashboard\",\n        \"/app/pedidos\",\n        \"/app/mesas\",\n        \"/app/cardapio\",\n        \"/app/estoque\",\n        \"/app/financeiro\",\n        \"/app/relatorios\",\n        \"/app/configuracoes\",\n        \"/app/kds\",\n        \"/app/clientes\"\n    ],\n    manager: [\n        \"/app/dashboard\",\n        \"/app/pedidos\",\n        \"/app/mesas\",\n        \"/app/cardapio\",\n        \"/app/estoque\",\n        \"/app/financeiro\",\n        \"/app/relatorios\",\n        \"/app/configuracoes\",\n        \"/app/kds\",\n        \"/app/clientes\"\n    ],\n    waiter: [\n        \"/app/pedidos\",\n        \"/app/mesas\"\n    ],\n    kitchen: [\n        \"/app/kds\"\n    ],\n    cashier: [\n        \"/app/financeiro\",\n        \"/app/pedidos\"\n    ]\n};\nfunction middleware(request) {\n    const { pathname } = request.nextUrl;\n    // Rotas que não devem ser interceptadas pelo middleware\n    const publicRoutes = [\n        \"/login\",\n        \"/register\",\n        \"/\",\n        \"/kds\"\n    ];\n    const isPublicRoute = publicRoutes.includes(pathname);\n    // Se for rota pública, permitir acesso direto\n    if (isPublicRoute) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].next();\n    }\n    // Verificar cookies de autenticação\n    const authCookie = request.cookies.get(\"auth-storage\")?.value;\n    let userRole = null;\n    let isAuthenticated = false;\n    if (authCookie) {\n        try {\n            // Tentar parsear o cookie\n            const parsedCookie = JSON.parse(authCookie);\n            // O Zustand pode salvar de diferentes formas\n            if (parsedCookie.state) {\n                // Formato padrão do Zustand persist\n                isAuthenticated = parsedCookie.state.isAuthenticated || false;\n                userRole = parsedCookie.state.user?.role || null;\n            } else if (parsedCookie.isAuthenticated !== undefined) {\n                // Formato direto\n                isAuthenticated = parsedCookie.isAuthenticated;\n                userRole = parsedCookie.user?.role || null;\n            }\n        } catch (e) {\n            // Cookie malformado, tratar como não autenticado\n            isAuthenticated = false;\n            userRole = null;\n        }\n    }\n    // Se for rota pública e estiver autenticado, redireciona para o dashboard\n    if (isPublicRoute && isAuthenticated) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(new URL(\"/app/dashboard\", request.url));\n    }\n    // Se não for rota pública e não estiver autenticado, redireciona para o login\n    if (!isPublicRoute && !isAuthenticated) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(new URL(\"/login\", request.url));\n    }\n    // Se estiver autenticado, verificar permissões\n    if (isAuthenticated && !isPublicRoute) {\n        const allowedRoutes = userRole ? roleRoutes[userRole.toLowerCase()] || [] : [];\n        // Permitir acesso ao dashboard para todos os perfis autenticados\n        if (pathname === \"/app/dashboard\" || allowedRoutes.some((route)=>pathname.startsWith(route))) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].next();\n        }\n        // Se não tiver permissão, redireciona para uma página de acesso negado ou dashboard\n        console.log(`Acesso negado para ${pathname} - Usuário: ${userRole} - Rotas permitidas:`, allowedRoutes);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(new URL(\"/app/dashboard\", request.url));\n    }\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].next();\n}\nconst config = {\n    matcher: [\n        \"/((?!api|_next/static|_next/image|favicon.ico).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0tBQ0Q7QUFDSCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL21pZGRsZXdhcmUudHM/NDIyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgdHlwZSB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuXG4vLyBEZWZpbmnDp8OjbyBkZSBwZXJmaXMgZSBzdWFzIHJvdGFzIHBlcm1pdGlkYXNcbmNvbnN0IHJvbGVSb3V0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcbiAgYWRtaW46IFsnL2FwcC9kYXNoYm9hcmQnLCAnL2FwcC9wZWRpZG9zJywgJy9hcHAvbWVzYXMnLCAnL2FwcC9jYXJkYXBpbycsICcvYXBwL2VzdG9xdWUnLCAnL2FwcC9maW5hbmNlaXJvJywgJy9hcHAvcmVsYXRvcmlvcycsICcvYXBwL2NvbmZpZ3VyYWNvZXMnLCAnL2FwcC9rZHMnLCAnL2FwcC9jbGllbnRlcyddLFxuICBtYW5hZ2VyOiBbJy9hcHAvZGFzaGJvYXJkJywgJy9hcHAvcGVkaWRvcycsICcvYXBwL21lc2FzJywgJy9hcHAvY2FyZGFwaW8nLCAnL2FwcC9lc3RvcXVlJywgJy9hcHAvZmluYW5jZWlybycsICcvYXBwL3JlbGF0b3Jpb3MnLCAnL2FwcC9jb25maWd1cmFjb2VzJywgJy9hcHAva2RzJywgJy9hcHAvY2xpZW50ZXMnXSxcbiAgd2FpdGVyOiBbJy9hcHAvcGVkaWRvcycsICcvYXBwL21lc2FzJ10sXG4gIGtpdGNoZW46IFsnL2FwcC9rZHMnXSxcbiAgY2FzaGllcjogWycvYXBwL2ZpbmFuY2Vpcm8nLCAnL2FwcC9wZWRpZG9zJ10sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCB7IHBhdGhuYW1lIH0gPSByZXF1ZXN0Lm5leHRVcmw7XG5cbiAgLy8gUm90YXMgcXVlIG7Do28gZGV2ZW0gc2VyIGludGVyY2VwdGFkYXMgcGVsbyBtaWRkbGV3YXJlXG4gIGNvbnN0IHB1YmxpY1JvdXRlcyA9IFsnL2xvZ2luJywgJy9yZWdpc3RlcicsICcvJywgJy9rZHMnXTtcbiAgY29uc3QgaXNQdWJsaWNSb3V0ZSA9IHB1YmxpY1JvdXRlcy5pbmNsdWRlcyhwYXRobmFtZSk7XG4gIFxuICAvLyBTZSBmb3Igcm90YSBww7pibGljYSwgcGVybWl0aXIgYWNlc3NvIGRpcmV0b1xuICBpZiAoaXNQdWJsaWNSb3V0ZSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpO1xuICB9XG5cbiAgLy8gVmVyaWZpY2FyIGNvb2tpZXMgZGUgYXV0ZW50aWNhw6fDo29cbiAgY29uc3QgYXV0aENvb2tpZSA9IHJlcXVlc3QuY29va2llcy5nZXQoJ2F1dGgtc3RvcmFnZScpPy52YWx1ZTtcbiAgbGV0IHVzZXJSb2xlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgbGV0IGlzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xuXG4gIGlmIChhdXRoQ29va2llKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRlbnRhciBwYXJzZWFyIG8gY29va2llXG4gICAgICBjb25zdCBwYXJzZWRDb29raWUgPSBKU09OLnBhcnNlKGF1dGhDb29raWUpO1xuICAgICAgXG4gICAgICAvLyBPIFp1c3RhbmQgcG9kZSBzYWx2YXIgZGUgZGlmZXJlbnRlcyBmb3JtYXNcbiAgICAgIGlmIChwYXJzZWRDb29raWUuc3RhdGUpIHtcbiAgICAgICAgLy8gRm9ybWF0byBwYWRyw6NvIGRvIFp1c3RhbmQgcGVyc2lzdFxuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQgPSBwYXJzZWRDb29raWUuc3RhdGUuaXNBdXRoZW50aWNhdGVkIHx8IGZhbHNlO1xuICAgICAgICB1c2VyUm9sZSA9IHBhcnNlZENvb2tpZS5zdGF0ZS51c2VyPy5yb2xlIHx8IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHBhcnNlZENvb2tpZS5pc0F1dGhlbnRpY2F0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBGb3JtYXRvIGRpcmV0b1xuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQgPSBwYXJzZWRDb29raWUuaXNBdXRoZW50aWNhdGVkO1xuICAgICAgICB1c2VyUm9sZSA9IHBhcnNlZENvb2tpZS51c2VyPy5yb2xlIHx8IG51bGw7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gQ29va2llIG1hbGZvcm1hZG8sIHRyYXRhciBjb21vIG7Do28gYXV0ZW50aWNhZG9cbiAgICAgIGlzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xuICAgICAgdXNlclJvbGUgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNlIGZvciByb3RhIHDDumJsaWNhIGUgZXN0aXZlciBhdXRlbnRpY2FkbywgcmVkaXJlY2lvbmEgcGFyYSBvIGRhc2hib2FyZFxuICBpZiAoaXNQdWJsaWNSb3V0ZSAmJiBpc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9hcHAvZGFzaGJvYXJkJywgcmVxdWVzdC51cmwpKTtcbiAgfVxuXG4gIC8vIFNlIG7Do28gZm9yIHJvdGEgcMO6YmxpY2EgZSBuw6NvIGVzdGl2ZXIgYXV0ZW50aWNhZG8sIHJlZGlyZWNpb25hIHBhcmEgbyBsb2dpblxuICBpZiAoIWlzUHVibGljUm91dGUgJiYgIWlzQXV0aGVudGljYXRlZCkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnL2xvZ2luJywgcmVxdWVzdC51cmwpKTtcbiAgfVxuXG4gIC8vIFNlIGVzdGl2ZXIgYXV0ZW50aWNhZG8sIHZlcmlmaWNhciBwZXJtaXNzw7Vlc1xuICBpZiAoaXNBdXRoZW50aWNhdGVkICYmICFpc1B1YmxpY1JvdXRlKSB7XG4gICAgY29uc3QgYWxsb3dlZFJvdXRlcyA9IHVzZXJSb2xlID8gcm9sZVJvdXRlc1t1c2VyUm9sZS50b0xvd2VyQ2FzZSgpXSB8fCBbXSA6IFtdO1xuICAgIFxuICAgIC8vIFBlcm1pdGlyIGFjZXNzbyBhbyBkYXNoYm9hcmQgcGFyYSB0b2RvcyBvcyBwZXJmaXMgYXV0ZW50aWNhZG9zXG4gICAgaWYgKHBhdGhuYW1lID09PSAnL2FwcC9kYXNoYm9hcmQnIHx8IGFsbG93ZWRSb3V0ZXMuc29tZShyb3V0ZSA9PiBwYXRobmFtZS5zdGFydHNXaXRoKHJvdXRlKSkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpO1xuICAgIH1cbiAgICBcbiAgICAvLyBTZSBuw6NvIHRpdmVyIHBlcm1pc3PDo28sIHJlZGlyZWNpb25hIHBhcmEgdW1hIHDDoWdpbmEgZGUgYWNlc3NvIG5lZ2FkbyBvdSBkYXNoYm9hcmRcbiAgICBjb25zb2xlLmxvZyhgQWNlc3NvIG5lZ2FkbyBwYXJhICR7cGF0aG5hbWV9IC0gVXN1w6FyaW86ICR7dXNlclJvbGV9IC0gUm90YXMgcGVybWl0aWRhczpgLCBhbGxvd2VkUm91dGVzKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9hcHAvZGFzaGJvYXJkJywgcmVxdWVzdC51cmwpKTtcbiAgfVxuXG4gIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpO1xufVxuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiBbXG4gICAgJy8oKD8hYXBpfF9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljbykuKiknLFxuICBdLFxufTtcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJyb2xlUm91dGVzIiwiYWRtaW4iLCJtYW5hZ2VyIiwid2FpdGVyIiwia2l0Y2hlbiIsImNhc2hpZXIiLCJtaWRkbGV3YXJlIiwicmVxdWVzdCIsInBhdGhuYW1lIiwibmV4dFVybCIsInB1YmxpY1JvdXRlcyIsImlzUHVibGljUm91dGUiLCJpbmNsdWRlcyIsIm5leHQiLCJhdXRoQ29va2llIiwiY29va2llcyIsImdldCIsInZhbHVlIiwidXNlclJvbGUiLCJpc0F1dGhlbnRpY2F0ZWQiLCJwYXJzZWRDb29raWUiLCJKU09OIiwicGFyc2UiLCJzdGF0ZSIsInVzZXIiLCJyb2xlIiwidW5kZWZpbmVkIiwiZSIsInJlZGlyZWN0IiwiVVJMIiwidXJsIiwiYWxsb3dlZFJvdXRlcyIsInRvTG93ZXJDYXNlIiwic29tZSIsInJvdXRlIiwic3RhcnRzV2l0aCIsImNvbnNvbGUiLCJsb2ciLCJjb25maWciLCJtYXRjaGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});