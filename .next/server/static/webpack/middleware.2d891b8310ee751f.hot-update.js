"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(middleware)/./node_modules/next/dist/esm/server/web/exports/next-response.js\");\n\n// Definição de perfis e suas rotas permitidas\nconst roleRoutes = {\n    admin: [\n        \"/app/dashboard\",\n        \"/app/pedidos\",\n        \"/app/mesas\",\n        \"/app/cardapio\",\n        \"/app/estoque\",\n        \"/app/financeiro\",\n        \"/app/relatorios\",\n        \"/app/configuracoes\",\n        \"/app/kds\",\n        \"/app/clientes\"\n    ],\n    manager: [\n        \"/app/dashboard\",\n        \"/app/pedidos\",\n        \"/app/mesas\",\n        \"/app/cardapio\",\n        \"/app/estoque\",\n        \"/app/financeiro\",\n        \"/app/relatorios\",\n        \"/app/configuracoes\",\n        \"/app/kds\",\n        \"/app/clientes\"\n    ],\n    waiter: [\n        \"/app/pedidos\",\n        \"/app/mesas\"\n    ],\n    kitchen: [\n        \"/app/kds\"\n    ],\n    cashier: [\n        \"/app/financeiro\",\n        \"/app/pedidos\"\n    ]\n};\nfunction middleware(request) {\n    const { pathname } = request.nextUrl;\n    const publicRoutes = [\n        \"/login\",\n        \"/register\",\n        \"/\",\n        \"/kds\"\n    ];\n    const isPublicRoute = publicRoutes.includes(pathname);\n    // Verificar cookies de autenticação\n    const authCookie = request.cookies.get(\"auth-storage\")?.value;\n    let userRole = null;\n    let isAuthenticated = false;\n    if (authCookie) {\n        try {\n            // Tentar parsear o cookie\n            const parsedCookie = JSON.parse(authCookie);\n            // O Zustand pode salvar de diferentes formas\n            if (parsedCookie.state) {\n                // Formato padrão do Zustand persist\n                isAuthenticated = parsedCookie.state.isAuthenticated || false;\n                userRole = parsedCookie.state.user?.role || null;\n            } else if (parsedCookie.isAuthenticated !== undefined) {\n                // Formato direto\n                isAuthenticated = parsedCookie.isAuthenticated;\n                userRole = parsedCookie.user?.role || null;\n            }\n        } catch (e) {\n            // Cookie malformado, tratar como não autenticado\n            isAuthenticated = false;\n            userRole = null;\n        }\n    }\n    // Se for rota pública e estiver autenticado, redireciona para o dashboard\n    if (isPublicRoute && isAuthenticated) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(new URL(\"/app/dashboard\", request.url));\n    }\n    // Se não for rota pública e não estiver autenticado, redireciona para o login\n    if (!isPublicRoute && !isAuthenticated) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(new URL(\"/login\", request.url));\n    }\n    // Se estiver autenticado, verificar permissões\n    if (isAuthenticated && !isPublicRoute) {\n        const allowedRoutes = userRole ? roleRoutes[userRole.toLowerCase()] || [] : [];\n        // Permitir acesso ao dashboard para todos os perfis autenticados\n        if (pathname === \"/app/dashboard\" || allowedRoutes.some((route)=>pathname.startsWith(route))) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].next();\n        }\n        // Se não tiver permissão, redireciona para uma página de acesso negado ou dashboard\n        console.log(`Acesso negado para ${pathname} - Usuário: ${userRole} - Rotas permitidas:`, allowedRoutes);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(new URL(\"/app/dashboard\", request.url));\n    }\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].next();\n}\nconst config = {\n    matcher: [\n        \"/((?!api|_next/static|_next/image|favicon.ico|kds).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgdHlwZSB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuXG4vLyBEZWZpbmnDp8OjbyBkZSBwZXJmaXMgZSBzdWFzIHJvdGFzIHBlcm1pdGlkYXNcbmNvbnN0IHJvbGVSb3V0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcbiAgYWRtaW46IFsnL2FwcC9kYXNoYm9hcmQnLCAnL2FwcC9wZWRpZG9zJywgJy9hcHAvbWVzYXMnLCAnL2FwcC9jYXJkYXBpbycsICcvYXBwL2VzdG9xdWUnLCAnL2FwcC9maW5hbmNlaXJvJywgJy9hcHAvcmVsYXRvcmlvcycsICcvYXBwL2NvbmZpZ3VyYWNvZXMnLCAnL2FwcC9rZHMnLCAnL2FwcC9jbGllbnRlcyddLFxuICBtYW5hZ2VyOiBbJy9hcHAvZGFzaGJvYXJkJywgJy9hcHAvcGVkaWRvcycsICcvYXBwL21lc2FzJywgJy9hcHAvY2FyZGFwaW8nLCAnL2FwcC9lc3RvcXVlJywgJy9hcHAvZmluYW5jZWlybycsICcvYXBwL3JlbGF0b3Jpb3MnLCAnL2FwcC9jb25maWd1cmFjb2VzJywgJy9hcHAva2RzJywgJy9hcHAvY2xpZW50ZXMnXSxcbiAgd2FpdGVyOiBbJy9hcHAvcGVkaWRvcycsICcvYXBwL21lc2FzJ10sXG4gIGtpdGNoZW46IFsnL2FwcC9rZHMnXSxcbiAgY2FzaGllcjogWycvYXBwL2ZpbmFuY2Vpcm8nLCAnL2FwcC9wZWRpZG9zJ10sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCB7IHBhdGhuYW1lIH0gPSByZXF1ZXN0Lm5leHRVcmw7XG5cbiAgY29uc3QgcHVibGljUm91dGVzID0gWycvbG9naW4nLCAnL3JlZ2lzdGVyJywgJy8nLCAnL2tkcyddO1xuICBjb25zdCBpc1B1YmxpY1JvdXRlID0gcHVibGljUm91dGVzLmluY2x1ZGVzKHBhdGhuYW1lKTtcblxuICAvLyBWZXJpZmljYXIgY29va2llcyBkZSBhdXRlbnRpY2HDp8Ojb1xuICBjb25zdCBhdXRoQ29va2llID0gcmVxdWVzdC5jb29raWVzLmdldCgnYXV0aC1zdG9yYWdlJyk/LnZhbHVlO1xuICBsZXQgdXNlclJvbGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBsZXQgaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XG5cbiAgaWYgKGF1dGhDb29raWUpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVGVudGFyIHBhcnNlYXIgbyBjb29raWVcbiAgICAgIGNvbnN0IHBhcnNlZENvb2tpZSA9IEpTT04ucGFyc2UoYXV0aENvb2tpZSk7XG4gICAgICBcbiAgICAgIC8vIE8gWnVzdGFuZCBwb2RlIHNhbHZhciBkZSBkaWZlcmVudGVzIGZvcm1hc1xuICAgICAgaWYgKHBhcnNlZENvb2tpZS5zdGF0ZSkge1xuICAgICAgICAvLyBGb3JtYXRvIHBhZHLDo28gZG8gWnVzdGFuZCBwZXJzaXN0XG4gICAgICAgIGlzQXV0aGVudGljYXRlZCA9IHBhcnNlZENvb2tpZS5zdGF0ZS5pc0F1dGhlbnRpY2F0ZWQgfHwgZmFsc2U7XG4gICAgICAgIHVzZXJSb2xlID0gcGFyc2VkQ29va2llLnN0YXRlLnVzZXI/LnJvbGUgfHwgbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAocGFyc2VkQ29va2llLmlzQXV0aGVudGljYXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIEZvcm1hdG8gZGlyZXRvXG4gICAgICAgIGlzQXV0aGVudGljYXRlZCA9IHBhcnNlZENvb2tpZS5pc0F1dGhlbnRpY2F0ZWQ7XG4gICAgICAgIHVzZXJSb2xlID0gcGFyc2VkQ29va2llLnVzZXI/LnJvbGUgfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBDb29raWUgbWFsZm9ybWFkbywgdHJhdGFyIGNvbW8gbsOjbyBhdXRlbnRpY2Fkb1xuICAgICAgaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XG4gICAgICB1c2VyUm9sZSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gU2UgZm9yIHJvdGEgcMO6YmxpY2EgZSBlc3RpdmVyIGF1dGVudGljYWRvLCByZWRpcmVjaW9uYSBwYXJhIG8gZGFzaGJvYXJkXG4gIGlmIChpc1B1YmxpY1JvdXRlICYmIGlzQXV0aGVudGljYXRlZCkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnL2FwcC9kYXNoYm9hcmQnLCByZXF1ZXN0LnVybCkpO1xuICB9XG5cbiAgLy8gU2UgbsOjbyBmb3Igcm90YSBww7pibGljYSBlIG7Do28gZXN0aXZlciBhdXRlbnRpY2FkbywgcmVkaXJlY2lvbmEgcGFyYSBvIGxvZ2luXG4gIGlmICghaXNQdWJsaWNSb3V0ZSAmJiAhaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvbG9naW4nLCByZXF1ZXN0LnVybCkpO1xuICB9XG5cbiAgLy8gU2UgZXN0aXZlciBhdXRlbnRpY2FkbywgdmVyaWZpY2FyIHBlcm1pc3PDtWVzXG4gIGlmIChpc0F1dGhlbnRpY2F0ZWQgJiYgIWlzUHVibGljUm91dGUpIHtcbiAgICBjb25zdCBhbGxvd2VkUm91dGVzID0gdXNlclJvbGUgPyByb2xlUm91dGVzW3VzZXJSb2xlLnRvTG93ZXJDYXNlKCldIHx8IFtdIDogW107XG4gICAgXG4gICAgLy8gUGVybWl0aXIgYWNlc3NvIGFvIGRhc2hib2FyZCBwYXJhIHRvZG9zIG9zIHBlcmZpcyBhdXRlbnRpY2Fkb3NcbiAgICBpZiAocGF0aG5hbWUgPT09ICcvYXBwL2Rhc2hib2FyZCcgfHwgYWxsb3dlZFJvdXRlcy5zb21lKHJvdXRlID0+IHBhdGhuYW1lLnN0YXJ0c1dpdGgocm91dGUpKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFNlIG7Do28gdGl2ZXIgcGVybWlzc8OjbywgcmVkaXJlY2lvbmEgcGFyYSB1bWEgcMOhZ2luYSBkZSBhY2Vzc28gbmVnYWRvIG91IGRhc2hib2FyZFxuICAgIGNvbnNvbGUubG9nKGBBY2Vzc28gbmVnYWRvIHBhcmEgJHtwYXRobmFtZX0gLSBVc3XDoXJpbzogJHt1c2VyUm9sZX0gLSBSb3RhcyBwZXJtaXRpZGFzOmAsIGFsbG93ZWRSb3V0ZXMpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnL2FwcC9kYXNoYm9hcmQnLCByZXF1ZXN0LnVybCkpO1xuICB9XG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XG59XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIG1hdGNoZXI6IFtcbiAgICAnLygoPyFhcGl8X25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvfGtkcykuKiknLFxuICBdLFxufTtcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJyb2xlUm91dGVzIiwiYWRtaW4iLCJtYW5hZ2VyIiwid2FpdGVyIiwia2l0Y2hlbiIsImNhc2hpZXIiLCJtaWRkbGV3YXJlIiwicmVxdWVzdCIsInBhdGhuYW1lIiwibmV4dFVybCIsInB1YmxpY1JvdXRlcyIsImlzUHVibGljUm91dGUiLCJpbmNsdWRlcyIsImF1dGhDb29raWUiLCJjb29raWVzIiwiZ2V0IiwidmFsdWUiLCJ1c2VyUm9sZSIsImlzQXV0aGVudGljYXRlZCIsInBhcnNlZENvb2tpZSIsIkpTT04iLCJwYXJzZSIsInN0YXRlIiwidXNlciIsInJvbGUiLCJ1bmRlZmluZWQiLCJlIiwicmVkaXJlY3QiLCJVUkwiLCJ1cmwiLCJhbGxvd2VkUm91dGVzIiwidG9Mb3dlckNhc2UiLCJzb21lIiwicm91dGUiLCJzdGFydHNXaXRoIiwibmV4dCIsImNvbnNvbGUiLCJsb2ciLCJjb25maWciLCJtYXRjaGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});