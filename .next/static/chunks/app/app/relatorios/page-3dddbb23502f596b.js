(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[503],{65387:function(e,t,s){Promise.resolve().then(s.bind(s,40393))},40393:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=s(57437),r=s(2265),l=s(52170);s(42413);var n=s(58222),d=s(5985),i=s(41298),o=s(93505),c=s(89416),m=s(54765);function x(e){let{products:t}=e,s=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Produtos Mais Vendidos"}),(0,a.jsx)("ul",{className:"space-y-3",children:t.map((e,t)=>(0,a.jsxs)("li",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"text-gray-500 font-bold w-6",children:[t+1,"."]}),(0,a.jsx)("span",{className:"font-medium text-gray-800",children:e.productName})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-semibold text-gray-900",children:[e.totalQuantitySold," vendidos"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:s(e.totalRevenue)})]})]},e.productId))})]})}function u(e){let{data:t}=e,s=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),r=t.reduce((e,t)=>e+t.totalRevenue,0);return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Vendas por Categoria"}),(0,a.jsx)("ul",{className:"space-y-3",children:t.map(e=>(0,a.jsxs)("li",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-800",children:e.categoryName}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-1",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:"".concat(e.totalRevenue/r*100,"%")}})})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:s(e.totalRevenue)}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.totalQuantitySold," vendidos"]})]})]},e.categoryName))})]})}var h=s(45253),g=s(3952),j=s(16573),b=s(24235),f=s(50039),N=s(86812),y=s(79857),v=s(19223);function p(e){let{data:t}=e,s=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm h-96",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Receita ao Longo do Tempo"}),(0,a.jsx)(h.h,{width:"100%",height:"100%",children:(0,a.jsxs)(g.w,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(j.q,{strokeDasharray:"3 3"}),(0,a.jsx)(b.K,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),(0,a.jsx)(f.B,{tickFormatter:e=>s(e)}),(0,a.jsx)(N.u,{formatter:e=>s(e)}),(0,a.jsx)(y.D,{}),(0,a.jsx)(v.x,{type:"monotone",dataKey:"totalRevenue",name:"Receita",stroke:"#8884d8",activeDot:{r:8}})]})})]})}function w(){let[e,t]=(0,r.useState)(null),[s,h]=(0,r.useState)([]),[g,j]=(0,r.useState)([]),[b,f]=(0,r.useState)([]),[N,y]=(0,r.useState)(null),[v,w]=(0,r.useState)(!1),[R,S]=(0,r.useState)(new Date),[D,k]=(0,r.useState)(new Date),B=async()=>{if(!R||!D){y("Por favor, selecione as datas de in\xedcio e fim.");return}try{w(!0),y(null);let e={startDate:R.toISOString(),endDate:D.toISOString()},[s,a,r,l]=await Promise.all([(0,n.NR)(e),(0,n.DE)({...e,limit:5}),(0,n.ot)(e),(0,n.Hi)(e)]);t(s),h(a),j(r),f(l)}catch(e){console.error("Failed to fetch reports:",e),y("N\xe3o foi poss\xedvel gerar os relat\xf3rios."),t(null),h([]),j([]),f([])}finally{w(!1)}},F=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Relat\xf3rios Gerenciais"})}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Selecione o Per\xedodo"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600 mb-1",children:"Data In\xedcio"}),(0,a.jsx)(l.ZP,{selected:R,onChange:e=>S(e),selectsStart:!0,startDate:R,endDate:D,dateFormat:"dd/MM/yyyy",locale:m.Z,className:"p-2 border rounded-md"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600 mb-1",children:"Data Fim"}),(0,a.jsx)(l.ZP,{selected:D,onChange:e=>k(e),selectsEnd:!0,startDate:R,endDate:D,minDate:R||void 0,dateFormat:"dd/MM/yyyy",locale:m.Z,className:"p-2 border rounded-md"})]}),(0,a.jsx)("button",{onClick:B,disabled:v,className:"self-end px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:bg-orange-300",children:v?"Gerando...":"Gerar Relat\xf3rio"})]})]}),N&&(0,a.jsx)("div",{className:"text-red-500 bg-red-100 p-4 rounded-lg mb-6",children:N}),e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(d.R,{title:"Receita Total",value:F(e.totalRevenue),icon:(0,a.jsx)(i.Z,{size:24,className:"text-green-500"})}),(0,a.jsx)(d.R,{title:"Total de Pedidos",value:e.totalOrders.toString(),icon:(0,a.jsx)(o.Z,{size:24,className:"text-blue-500"})}),(0,a.jsx)(d.R,{title:"Ticket M\xe9dio",value:F(e.averageOrderValue),icon:(0,a.jsx)(c.Z,{size:24,className:"text-purple-500"})})]}),b.length>0&&(0,a.jsx)(p,{data:b}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.length>0&&(0,a.jsx)(x,{products:s}),g.length>0&&(0,a.jsx)(u,{data:g})]})]})]})}},5985:function(e,t,s){"use strict";s.d(t,{R:function(){return d}});var a=s(57437),r=s(96061);s(2265);let l=(0,r.j)("rounded-xl border bg-white p-6 shadow-sm transition-transform hover:scale-[1.02]",{variants:{color:{default:"border-gray-200",blue:"border-blue-500",green:"border-green-500",orange:"border-orange-500",red:"border-red-500"}},defaultVariants:{color:"default"}}),n=(0,r.j)("rounded-lg p-3 text-white",{variants:{color:{default:"bg-gray-700",blue:"bg-blue-500",green:"bg-green-500",orange:"bg-orange-500",red:"bg-red-500"}},defaultVariants:{color:"default"}});function d(e){let{title:t,value:s,icon:r,color:d,footer:i}=e;return(0,a.jsxs)("div",{className:l({color:d}),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-600",children:t}),(0,a.jsx)("div",{className:n({color:d}),children:r})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:s}),i&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:i})]})]})}}},function(e){e.O(0,[501,333,737,562,222,971,938,744],function(){return e(e.s=65387)}),_N_E=e.O()}]);