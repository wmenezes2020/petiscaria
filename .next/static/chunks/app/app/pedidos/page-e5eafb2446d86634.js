(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[225],{62898:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let s=(0,r.forwardRef)(({color:s="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:d="",children:c,...u},m)=>(0,r.createElement)("svg",{ref:m,...a,width:l,height:l,stroke:s,strokeWidth:i?24*Number(o)/Number(l):o,className:["lucide",`lucide-${n(e)}`,d].join(" "),...u},[...t.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s}},81291:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62898).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},17158:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62898).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},42482:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62898).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},70290:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62898).Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},91981:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62898).Z)("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},9883:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},45367:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},82549:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},97013:function(e,t,s){Promise.resolve().then(s.bind(s,94531))},94531:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var r=s(57437),a=s(2265),n=s(58222);let l=(0,s(96061).j)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold tracking-wide capitalize",{variants:{status:{PENDING:"bg-blue-100 text-blue-800",PREPARING:"bg-yellow-100 text-yellow-800",READY:"bg-orange-100 text-orange-800",DELIVERED:"bg-indigo-100 text-indigo-800",CANCELLED:"bg-red-100 text-red-800"}},defaultVariants:{status:"PENDING"}}),o={PENDING:"Pendente",PREPARING:"Em Preparo",READY:"Pronto",DELIVERED:"Entregue",CANCELLED:"Cancelado"};function i(e){let{status:t}=e;return(0,r.jsx)("span",{className:l({status:t}),children:o[t||"PENDING"]})}var d=s(70290),c=s(81291),u=s(17158),m=s(97024),h=s(82549);function x(e){var t,s;let{order:a,onClose:n}=e,l=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-[9999] p-4 transition-all duration-200",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col transition-all duration-200 scale-100",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["Detalhes do Pedido #",a.id.substring(0,8),"..."]}),(0,r.jsx)("button",{onClick:n,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full",children:(0,r.jsx)(h.Z,{size:24})})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Cliente / Mesa"}),(0,r.jsx)("p",{className:"font-semibold",children:a.table?"Mesa ".concat(a.table.number):(null===(t=a.customer)||void 0===t?void 0:t.name)||"Balc\xe3o"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Data do Pedido"}),(0,r.jsx)("p",{className:"font-semibold",children:(s=a.createdAt,new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(new Date(s)))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Status"}),(0,r.jsx)(i,{status:a.status})]})]}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2 text-gray-700",children:"Itens do Pedido"}),(0,r.jsx)("div",{className:"space-y-2",children:a.items.map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-md",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.quantity," x ",l(e.price)]})]}),(0,r.jsx)("p",{className:"font-semibold",children:l(e.quantity*e.price)})]},e.id))}),(0,r.jsx)("div",{className:"mt-6 pt-4 border-t",children:(0,r.jsxs)("div",{className:"flex justify-between items-center text-lg",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-800",children:"Total do Pedido:"}),(0,r.jsx)("span",{className:"font-bold text-orange-600",children:l(a.total)})]})})]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 border-t flex justify-end space-x-2",children:[(0,r.jsx)("button",{onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Fechar"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Imprimir"})]})]})})}function p(e){let{orders:t}=e,[s]=(0,a.useState)(t.length),[n,l]=(0,a.useState)(null),{user:o}=(0,m.t)(),h=(null==o?void 0:o.role)==="admin"||(null==o?void 0:o.role)==="manager"||(null==o?void 0:o.role)==="waiter",p=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),g=e=>new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e)),f=e=>{l(e)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm text-left text-gray-500",children:[(0,r.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"ID Pedido"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Status"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Cliente/Mesa"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Data"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-right",children:"Valor"}),h&&(0,r.jsx)("th",{scope:"col",className:"px-6 py-3"})]})}),(0,r.jsx)("tbody",{children:t.map(e=>{var t;return(0,r.jsxs)("tr",{onClick:()=>f(e),className:"bg-white border-b hover:bg-gray-50 cursor-pointer",children:[(0,r.jsxs)("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap",children:["#",e.id.substring(0,8),"..."]}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)(i,{status:e.status})}),(0,r.jsx)("td",{className:"px-6 py-4",children:e.table?"Mesa ".concat(e.table.number):(null===(t=e.customer)||void 0===t?void 0:t.name)||"Balc\xe3o"}),(0,r.jsx)("td",{className:"px-6 py-4",children:g(e.createdAt)}),(0,r.jsx)("td",{className:"px-6 py-4 text-right font-semibold",children:p(e.total)}),h&&(0,r.jsx)("td",{className:"px-6 py-4 text-right",children:(0,r.jsx)("button",{className:"text-gray-500 hover:text-gray-800",children:(0,r.jsx)(d.Z,{size:18})})})]},e.id)})})]})}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border-t",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-700",children:["Mostrando 1 a ",t.length," de ",s," pedidos"]}),(0,r.jsxs)("div",{className:"inline-flex items-center space-x-2",children:[(0,r.jsx)("button",{className:"p-2 text-gray-500 rounded-md hover:bg-gray-100 disabled:opacity-50",disabled:!0,children:(0,r.jsx)(c.Z,{size:20})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"P\xe1gina 1 de 1"}),(0,r.jsx)("button",{className:"p-2 text-gray-500 rounded-md hover:bg-gray-100 disabled:opacity-50",disabled:!0,children:(0,r.jsx)(u.Z,{size:20})})]})]})]}),n&&(0,r.jsx)(x,{order:n,onClose:()=>{l(null)}})]})}var g=s(42482),f=s(91981),y=s(61865),b=s(38110),v=s(92160),j=s(9883),N=s(45367);let w=v.Ry({productId:v.Z_().uuid("Selecione um produto."),quantity:v.dj(e=>parseInt(v.Z_().parse(e)||"1",10),v.Rx().min(1,"A quantidade deve ser pelo menos 1.")),notes:v.Z_().optional()}),k=v.Ry({tableId:v.Z_().uuid(),customerId:v.Z_().uuid(),customerName:v.Z_().optional(),items:v.IX(w).min(1,"Adicione pelo menos um item ao pedido."),status:v.Km(["PENDING","PREPARING","READY","DELIVERED","CANCELLED"]).default("PENDING"),priority:v.Km(["LOW","MEDIUM","HIGH"]).default("MEDIUM"),notes:v.Z_().optional(),discount:v.dj(e=>parseFloat(v.Z_().parse(e)||"0"),v.Rx().min(0).optional())});function D(e){var t;let{onClose:s,onSave:l}=e,[o,i]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),[u,m]=(0,a.useState)([]),[x,p]=(0,a.useState)(null),{control:g,register:f,handleSubmit:v,watch:w,setValue:D,formState:{errors:A,isSubmitting:E}}=(0,y.cI)({resolver:(0,b.F)(k),defaultValues:{items:[],discount:0}}),{fields:I,append:C,remove:Z}=(0,y.Dq)({control:g,name:"items"});(0,a.useEffect)(()=>{!async function(){try{let[e,t,s]=await Promise.all([(0,n.vf)(),(0,n.Lk)(),(0,n.OL)()]);i(e),c(t.filter(e=>e.isAvailable)),m(s)}catch(e){p("Falha ao carregar dados necess\xe1rios.")}}()},[]);let L=async e=>{try{p(null);let t=await (0,n.LV)(e);l(t),s()}catch(e){var t,r;p((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Ocorreu um erro ao criar o pedido.")}},P=w("items"),T=P.reduce((e,t)=>{let s=o.find(e=>e.id===t.productId);return e+((null==s?void 0:s.price)||0)*t.quantity},0),R=w("discount")||0;return(0,r.jsx)("div",{className:"fixed inset-0 flex justify-center items-start p-4 pt-10 transition-all duration-200",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)",zIndex:9999},children:(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col transition-all duration-200",style:{backgroundColor:"white",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:(0,r.jsxs)("form",{onSubmit:v(L),id:"order-form",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Novo Pedido"}),(0,r.jsx)("button",{type:"button",onClick:s,children:(0,r.jsx)(h.Z,{size:24})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4 flex-grow overflow-y-auto",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"tableId",className:"block text-sm font-medium text-gray-700",children:"Mesa"}),(0,r.jsxs)("select",{...f("tableId"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[(0,r.jsx)("option",{value:"",children:"Nenhuma"}),d.map(e=>(0,r.jsxs)("option",{value:e.id,children:["Mesa ",e.name]},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"customerId",className:"block text-sm font-medium text-gray-700",children:"Cliente"}),(0,r.jsxs)("select",{...f("customerId"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[(0,r.jsx)("option",{value:"",children:"Balc\xe3o / Avulso"}),u.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"font-semibold",children:"Itens"}),(0,r.jsxs)("button",{type:"button",onClick:()=>{let e=o[0];e&&C({productId:e.id,quantity:1})},className:"text-sm text-blue-600 flex items-center",children:[(0,r.jsx)(j.Z,{size:16,className:"mr-1"})," Adicionar item"]})]}),I.map((e,t)=>{var s,a;return(0,r.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg mt-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.Qr,{control:g,name:"items.".concat(t,".productId"),render:e=>{let{field:t}=e;return(0,r.jsxs)("select",{...t,onChange:e=>{o.find(t=>t.id===e.target.value),t.onChange(e)},className:"flex-grow block w-full rounded-md border-gray-300 shadow-sm",children:[(0,r.jsx)("option",{value:"",children:"Selecione um produto..."}),o.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})}}),(0,r.jsx)("input",{type:"number",...f("items.".concat(t,".quantity")),defaultValue:1,className:"w-20 block rounded-md border-gray-300 shadow-sm"}),(0,r.jsx)("span",{className:"w-24 text-right pr-2",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(((null===(s=o.find(e=>{var s;return e.id===(null===(s=P[t])||void 0===s?void 0:s.productId)}))||void 0===s?void 0:s.price)||0)*(null===(a=P[t])||void 0===a?void 0:a.quantity)||0)}),(0,r.jsx)("button",{type:"button",onClick:()=>Z(t),children:(0,r.jsx)(N.Z,{size:18,className:"text-red-500"})})]}),(0,r.jsx)("textarea",{...f("items.".concat(t,".notes")),placeholder:"Observa\xe7\xf5es do item...",rows:1,className:"mt-2 w-full text-sm rounded-md border-gray-300 shadow-sm"})]},e.id)}),A.items&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:A.items.message||(null===(t=A.items.root)||void 0===t?void 0:t.message)})]}),(0,r.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Observa\xe7\xf5es Gerais do Pedido"}),(0,r.jsx)("textarea",{...f("notes"),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,r.jsxs)("div",{className:"flex justify-end items-center space-x-4",children:[(0,r.jsx)("label",{htmlFor:"discount",className:"text-sm font-medium text-gray-700",children:"Desconto (R$)"}),(0,r.jsx)("input",{type:"number",step:"0.01",...f("discount"),className:"w-28 block rounded-md border-gray-300 shadow-sm"})]}),(0,r.jsxs)("div",{className:"font-bold text-lg text-right",children:["Total: ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(T-R)]})]})]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 border-t flex justify-end space-x-2",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:E?"Salvando...":"Salvar Pedido"})]})]})})})}function A(){let[e,t]=(0,a.useState)(null),[s,l]=(0,a.useState)(null),[o,i]=(0,a.useState)(!0),[d,c]=(0,a.useState)(!1),{user:u,checkAuthStatus:h}=(0,m.t)();(0,a.useEffect)(()=>{h(),(async()=>{try{i(!0);let e=await (0,n.AU)();t(e)}catch(e){console.error("Failed to fetch orders:",e),l("N\xe3o foi poss\xedvel carregar os pedidos.")}finally{i(!1)}})()},[]);let x=(null==u?void 0:u.role)==="admin"||(null==u?void 0:u.role)==="manager"||(null==u?void 0:u.role)==="waiter";return o?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("p",{children:"Carregando pedidos..."})}):s||!e?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("p",{className:"text-red-500",children:s||"Nenhum dado de pedido encontrado."})}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Hist\xf3rico de Pedidos"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)("button",{className:"flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:[(0,r.jsx)(g.Z,{size:18,className:"mr-2"}),"Filtros"]}),x&&(0,r.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:[(0,r.jsx)(f.Z,{size:18,className:"mr-2"}),"Adicionar Pedido"]})]})]}),(0,r.jsx)(p,{orders:e}),d&&(0,r.jsx)(D,{onClose:()=>c(!1),onSave:s=>{e&&t([s,...e])}})]})}},97024:function(e,t,s){"use strict";s.d(t,{t:function(){return i}});var r=s(94660),a=s(74810),n=s(58222);let l=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t));let s=JSON.stringify(t);document.cookie="".concat(e,"=").concat(encodeURIComponent(s),"; path=/; max-age=").concat(604800,"; SameSite=Lax")}catch(e){console.error("Erro ao salvar no storage:",e)}},o=e=>{try{let t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return console.error("Erro ao ler do storage:",e),null}},i=(0,r.Ue)()((0,a.tJ)((e,t)=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null,login:async(t,s,r)=>{try{e({isLoading:!0,error:null});let{accessToken:a,refreshToken:o,user:i}=(await n.hi.post("/auth/login",{email:t,password:s,companyId:r})).data;console.log("\uD83D\uDD10 Dados de login recebidos:",{accessToken:!!a,refreshToken:!!o,user:i}),n.hi.defaults.headers.common.Authorization="Bearer ".concat(a),e({user:i,accessToken:a,refreshToken:o,isAuthenticated:!0,isLoading:!1,error:null}),console.log("\uD83D\uDD10 Estado atualizado com sucesso"),l("auth-storage",{user:i,accessToken:a,refreshToken:o,isAuthenticated:!0}),await new Promise(e=>setTimeout(e,0))}catch(s){var a,o;let t=(null===(o=s.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)||"Erro ao fazer login";throw e({isLoading:!1,error:t,isAuthenticated:!1}),Error(t)}},register:async t=>{try{e({isLoading:!0,error:null});let{accessToken:s,refreshToken:r,user:a}=(await n.hi.post("/auth/register",t)).data;n.hi.defaults.headers.common.Authorization="Bearer ".concat(s),e({user:a,accessToken:s,refreshToken:r,isAuthenticated:!0,isLoading:!1,error:null}),await new Promise(e=>setTimeout(e,0))}catch(a){var s,r;let t=(null===(r=a.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Erro ao fazer cadastro";throw e({isLoading:!1,error:t,isAuthenticated:!1}),Error(t)}},logout:()=>{delete n.hi.defaults.headers.common.Authorization,e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null}),l("auth-storage",{user:null,accessToken:null,refreshToken:null,isAuthenticated:!1})},refreshAccessToken:async()=>{try{let{refreshToken:s}=t();if(!s)throw Error("Token de refresh n\xe3o encontrado");let{accessToken:r}=(await n.hi.post("/auth/refresh",{refreshToken:s})).data;e({accessToken:r,isAuthenticated:!0}),n.hi.defaults.headers.common.Authorization="Bearer ".concat(r)}catch(e){throw t().logout(),e}},clearError:()=>{e({error:null})},setLoading:t=>{e({isLoading:t})},checkAuthStatus:()=>{let s=t();console.log("\uD83D\uDD0D Verificando status de autentica\xe7\xe3o:",{isAuthenticated:s.isAuthenticated,hasUser:!!s.user,hasToken:!!s.accessToken});let r=o("auth-storage");console.log("\uD83D\uDCE6 Dados armazenados:",r),r&&r.accessToken&&!s.accessToken&&(console.log("\uD83D\uDD04 Restaurando dados do storage"),e({user:r.user,accessToken:r.accessToken,refreshToken:r.refreshToken,isAuthenticated:r.isAuthenticated}),r.accessToken&&(n.hi.defaults.headers.common.Authorization="Bearer ".concat(r.accessToken))),s.accessToken&&!s.isAuthenticated&&(console.log("\uD83D\uDD27 Corrigindo estado de autentica\xe7\xe3o"),e({isAuthenticated:!0}))}}),{name:"auth-storage",partialize:e=>({user:e.user,accessToken:e.accessToken,refreshToken:e.refreshToken,isAuthenticated:e.isAuthenticated})}))},96061:function(e,t,s){"use strict";s.d(t,{j:function(){return l}});var r=s(57042);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=r.W,l=(e,t)=>s=>{var r;if((null==t?void 0:t.variants)==null)return n(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:l,defaultVariants:o}=t,i=Object.keys(l).map(e=>{let t=null==s?void 0:s[e],r=null==o?void 0:o[e];if(null===t)return null;let n=a(t)||a(r);return l[e][n]}),d=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return n(e,i,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...o,...d}[t]):({...o,...d})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}},57042:function(e,t,s){"use strict";function r(){for(var e,t,s=0,r="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=function e(t){var s,r,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(r=e(t[s]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r)}return a}(e))&&(r&&(r+=" "),r+=t);return r}s.d(t,{W:function(){return r}}),t.Z=r}},function(e){e.O(0,[737,865,727,239,222,971,938,744],function(){return e(e.s=97013)}),_N_E=e.O()}]);